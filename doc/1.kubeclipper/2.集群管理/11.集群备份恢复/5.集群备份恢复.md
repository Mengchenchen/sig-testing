#### 集群备份&恢复

1. 集群备份-1

|||
| ---- | ---- |
| 编号 | 集群管理-备份空间-备份-1 |
| 测试点 | 1. 使用 fs 存储备份 |
| 预置条件 | 1. 存在可用的 “test-fs” 备份空间，类型为 fs\
2. 存在一个可用集群 “demo”\
3. 集群所有 master 节点已有备份空间目录并挂载在 nfs 服务中 |
| 步骤 | 1. 在集群管理页面，点击集群“demo-更多-集群设置”，选择"编辑"\
2. 备份空间选择 “test-fs”，点击“确定”按钮\
3. 点击集群“更多-备份和恢复-备份集群”， 在弹出的窗口中输入备份名称 “test-backup”， 点击“确定”按钮\
4. 查看集群列表\
5. 点进“demo”集群，点击“备份标签页”, 查看备份列表 |
| 预期结果 | 1. 步骤1中，跳转到集群编辑界面\
2. “demo” 集群备份空间配置成功，跳转至集群列表界面\
3. “demo” 集群备份操作成功，跳转至集群列表界面\
4. “demo” 集群显示正在备份中，等待数秒，显示运行中\
5. “demo” 集群备份列表新增一列 “demo-test-backup-随机数” 备份 |


2. 集群备份-2

|||
| ---- | ---- |
| 编号 | 集群管理-备份空间-备份-2 |
| 测试点 | 1. 使用 s3 存储备份 |
| 预置条件 | 1. 存在可用的 “test-s3” 备份空间，类型为 s3\
2. 存在一个可用集群 “demo” |
| 步骤 | 1. 在集群管理页面，点击集群“demo-更多-集群设置”，选择"编辑"\
2. 备份空间选择 “test-s3”，点击“确定”按钮\
3. 点击集群“更多-备份和恢复-备份集群”， 在弹出的窗口中输入备份名称 “test-backup”， 点击“确定”按钮\
4. 查看集群列表\
5. 点进“demo”集群，点击“备份标签页”, 查看备份列表 |
| 预期结果 | 1. 步骤1中，跳转到集群编辑界面\
2. “demo” 集群备份空间配置成功，跳转至集群列表界面\
3. “demo” 集群备份操作成功，跳转至集群列表界面\
4. “demo” 集群显示正在备份中，等待数秒，显示运行中\
5. “demo” 集群备份列表新增一列 “demo-test-backup-随机数” 备份 |


3. 集群恢复-1

|||
| ---- | ---- |
| 编号 | 集群管理-备份空间-恢复-1 |
| 测试点 | 1. 使用 s3 存储恢复 |
| 预置条件 | 1. 存在可用的 “test-s3” 备份空间，类型为 s3\
2. 存在一个可用集群 “demo”\
3. 集群存在可用的 “demo-test-backup-随机数” 备份，备份空间为 “test-s3” |
| 步骤 | 1. 在集群管理页面，点击集群“demo-更多-备份和恢复”，选择"恢复集群"\
2. 在弹出的恢复集群窗口中选择 “demo-test-backup-随机数”，点击“确定”按钮\
3. 查看集群列表 |
| 预期结果 | 1. 步骤1中，弹出恢复集群窗口\
2. “demo” 集群恢复配置成功，跳转至集群列表界面\
3. “demo” 集群显示恢复中，等待几分钟，显示运行中 |


4. 集群恢复-2

|||
| ---- | ---- |
| 编号 | 集群管理-备份空间-恢复-2 |
| 测试点 | 1. 使用 fs 存储恢复 |
| 预置条件 | 1. 存在可用的 “test-fs” 备份空间，类型为 fs\
2. 存在一个可用集群 “demo”\
3. 集群存在可用的 “demo-test-backup-随机数” 备份，备份空间为 “test-fs”\
4. 集群所有master节点已有备份空间目录并挂载在 nfs 服务中 |
| 步骤 | 1. 在集群管理页面，点击集群“demo-更多-备份和恢复”，选择"恢复集群"\
2. 在弹出的恢复集群窗口中选择 “demo-test-backup-随机数”，点击“确定”按钮\
3. 查看集群列表 |
| 预期结果 | 1. 步骤1中，弹出恢复集群窗口\
2. “demo” 集群恢复配置成功，跳转至集群列表界面\
3. “demo” 集群显示恢复中，等待几分钟，显示运行中 |
